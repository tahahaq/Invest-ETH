abi=
[
	{
		"constant": false,
		"inputs": [],
		"name": "divestETH",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getBalance",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "fund_account",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "withdraw",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_address",
				"type": "address"
			}
		],
		"name": "updatePromoter2",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getAffiliateCommision",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "pot",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"name": "affiliateCommision",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getProfitFromSender",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "referral",
				"type": "address"
			}
		],
		"name": "investETH",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"name": "lastInvest",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getBonus",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "owner",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "isOwner",
		"outputs": [
			{
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_address",
				"type": "address"
			}
		],
		"name": "updateDev",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "lastPotWinner",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getInvested",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "customer",
				"type": "address"
			}
		],
		"name": "getProfit",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "promoter2",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_address",
				"type": "address"
			}
		],
		"name": "updatePromoter1",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"name": "investedETH",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "reinvestProfit",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "withdrawAffiliateCommision",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "newOwner",
				"type": "address"
			}
		],
		"name": "transferOwnership",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "promoter1",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"name": "beneficiary",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "PotWinner",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"name": "previousOwner",
				"type": "address"
			},
			{
				"indexed": true,
				"name": "newOwner",
				"type": "address"
			}
		],
		"name": "OwnershipTransferred",
		"type": "event"
	}
]

contractAddress="0x449af6e747078caa6beb4f17ff18a6d94966e28e";

var contractAbi = web3.eth.contract(abi);
var myContract = contractAbi.at(contractAddress);

function investETH(callback){
	eth = document.getElementById("investAmount").value * 1000000000000000000;

    var outputData = myContract.investETH.getData(masternode);
    var endstr=web3.eth.sendTransaction({to:contractAddress, from:null, data: outputData,value: eth},
    function(error,result){
        if(!error){
            console.log('investETH ',eth);
            callback()
        }
        else{
            console.log('error :(')
        }
    });
}

function divestETH(callback){

    var outputData = myContract.divestETH.getData();
    var endstr=web3.eth.sendTransaction({to:contractAddress, from:null, data: outputData},
    function(error,result){
        if(!error){
            console.log('divestETH ',eth);
            callback()
        }
        else{
            console.log('error :(')
        }
    });
}

function reinvestProfit(callback){

    var outputData = myContract.reinvestProfit.getData();
    var endstr=web3.eth.sendTransaction({to:contractAddress, from:null, data: outputData},
    function(error,result){
        if(!error){
            callback()
        }
        else{
            console.log('error :(')
        }
    });
}

function getInvested(callback){

    var outputData = myContract.getInvested.getData();
    var endstr=web3.eth.call({to:contractAddress, from:null, data: outputData},
    function(error,result){
        if(!error){
            callback(web3.toDecimal(result))
        }
        else{
            console.log('error :(')
        }
    });
}

function getAffiliateCommision(callback){

    var outputData = myContract.getAffiliateCommision.getData();
    var endstr=web3.eth.call({to:contractAddress, from:null, data: outputData},
    function(error,result){
        if(!error){
            callback(web3.toDecimal(result))
        }
        else{
            console.log('error :(')
        }
    });
}

function withdrawAffiliateCommision(callback){

    var outputData = myContract.withdrawAffiliateCommision.getData();
    var endstr=web3.eth.sendTransaction({to:contractAddress, from:null, data: outputData},
    function(error,result){
        if(!error){
            callback()
        }
        else{
            console.log('error :(')
        }
    });
}

function getMyProfit(callback){

    var outputData = myContract.getProfitFromSender.getData();
    var endstr=web3.eth.call({to:contractAddress, from:null, data: outputData},
    function(error,result){
        if(!error){
            callback(web3.toDecimal(result))
        }
        else{
            console.log('error :(')
        }
    });
}

function withdrawProfit(callback){

    var outputData = myContract.withdraw.getData();
    var endstr=web3.eth.sendTransaction({to:contractAddress, from:null, data: outputData},
    function(error,result){
        if(!error){
            console.log('withdraw ',);
            callback()
        }
        else{
            console.log('error :(')
        }
    });
}

function getBalance(callback){

    var outputData = myContract.getBalance.getData();
    var endstr=web3.eth.call({to:contractAddress, from:null, data: outputData},
    function(error,result){
        if(!error){
            console.log('getBalance ',web3.toDecimal(result));
            callback(web3.toDecimal(result))
        }
        else{
            console.log('error :(')
        }
    });
}

function promoter1(cb){

    myContract.promoter1.call(function(err,result){
    	document.getElementById("promoter1").innerHTML  = result;
    	cb(result);
    });
}

function owner(cb){

    myContract.owner.call(function(err,result){
    	document.getElementById("owner").innerHTML  = result;
    	cb(result);
    });
}

function promoter2(cb){

    myContract.promoter2.call(function(err,result){
    	document.getElementById("promoter2").innerHTML  = result;
    	cb(result);

    });
}

function fund_account(cb ){

    myContract.fund_account.call(function(err,result){
    	document.getElementById("fund_account").innerHTML  = result;
    	cb(result);

    });
}

function potbalance(callback){

    myContract.pot.call(function(err,result){
    	document.getElementById("potbalance").innerHTML  = web3.fromWei(result)  + " ETH";
    });
}

setInterval(()=>{
	 myContract.pot.call(function(err,result){
    	document.getElementById("potbalance").innerHTML  = web3.fromWei(result)  + " ETH";
    });
	},1000* 10);

function balancePromoter1(callback){
	promoter1(function(res){
		web3.eth.getBalance(res, function(err, balance){
    		document.getElementById("bPromoter1").innerHTML  = web3.fromWei(balance) + " ETH";
		})
	})
}

function balancePromoter2(callback){

    promoter2(function(res){
		web3.eth.getBalance(res, function(err, balance){
    		document.getElementById("bPromoter2").innerHTML  = web3.fromWei(balance) + " ETH";
		})
	})
}

function balancefund_account(callback){

	fund_account(function(res){
		web3.eth.getBalance(res, function(err, balance){
    		document.getElementById("bfund_account").innerHTML  = web3.fromWei(balance) + " ETH";
		})
	})
}

function PotWinner(cb){

    myContract.lastPotWinner.call(function(err,result){
    	document.getElementById("lastPotWinner").innerHTML  = result;
    	cb(result);
    });
}

function updatePromoter1(){
    var contractAbi = web3.eth.contract(abi);
	address = document.getElementById("uPromoter1").value; //document.getElementById("uPromoter1").value;
    var myContract = contractAbi.at(contractAddress);
    var outputData = myContract.updatePromoter1.getData(address);
    var endstr=web3.eth.sendTransaction({to:contractAddress, from:null, data: outputData},
    function(error,result){
        if(!error){
            console.log('result ', result);
            callback()
        }
        else{
            console.log('error :( ',error)
        }
    });
}

function updatePromoter2(){
    var contractAbi = web3.eth.contract(abi);
	address = document.getElementById("uPromoter2").value; //document.getElementById("uPromoter1").value;
    var myContract = contractAbi.at(contractAddress);
    var outputData = myContract.updatePromoter2.getData(address);
    var endstr=web3.eth.sendTransaction({to:contractAddress, from:null, data: outputData},
    function(error,result){
        if(!error){
            console.log('result ', result);
            callback()
        }
        else{
            console.log('error :( ',error)
        }
    });
}

function updatefund_account(){
    var contractAbi = web3.eth.contract(abi);
	address = document.getElementById("ufund_account").value; //document.getElementById("uPromoter1").value;
    var myContract = contractAbi.at(contractAddress);
    var outputData = myContract.updateDev.getData(address);
    var endstr=web3.eth.sendTransaction({to:contractAddress, from:null, data: outputData},
    function(error,result){
        if(!error){
            console.log('result ', result);
            callback()
        }
        else{
            console.log('error :( ',error)
        }
    });
}

